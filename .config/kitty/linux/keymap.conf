map ctrl+tab
map ctrl+shift+tab

mouse_map ctrl+left press ungrabbed mouse_click_url

map alt+backspace    send_text all \x17
map alt+c            copy_to_clipboard
map --when-focus-on  var:in_editor alt+c
map alt+v            paste_from_clipboard
map alt+=            change_font_size all +1.0
map alt+-            change_font_size all -1.0
map alt+f2           set_tab_title
map f11              toggle_fullscreen
map alt+r            start_resizing_window
map alt+f5           load_config_file
map alt+,            launch --type=tab nvim $HOME/.config/kitty/kitty.conf

map alt+t            launch --type=tab --cwd=current
map ctrl+alt+t       launch --type=tab --cwd=~
map alt+shift+n      launch --type=os-window --cwd=current
map ctrl+alt+j       launch --type=window --cwd=current --location=hsplit
map ctrl+alt+l       launch --type=window --cwd=current --location=vsplit
map ctrl+alt+h       combine
                     \ : launch --type=window --cwd=current --location=vsplit
                     \ : move_window left
map ctrl+alt+k       combine
                     \ : launch --type=window --cwd=current --location=hsplit
                     \ : move_window up

map ctrl+tab         goto_tab -1
map alt+tab          goto_tab -1
map alt+1            goto_tab 1
map alt+2            goto_tab 2
map alt+3            goto_tab 3
map alt+4            goto_tab 4
map alt+5            goto_tab 5
map alt+6            goto_tab 6
map alt+7            goto_tab 7
map alt+8            goto_tab 8
map alt+9            goto_tab 9
map alt+[            previous_tab
map alt+]            next_tab
map alt+g            kitten kittens/select_tab.py

map alt+h            kitten kittens/pass_keys.py left   alt+h
map alt+j            kitten kittens/pass_keys.py bottom alt+j
map alt+k            kitten kittens/pass_keys.py top    alt+k
map alt+l            kitten kittens/pass_keys.py right  alt+l

map alt+shift+h      move_window left
map alt+shift+j      move_window down
map alt+shift+k      move_window up
map alt+shift+l      move_window right

map shift+esc        toggle_layout stack

map alt+shift+t      layout_action rotate

# It may be useful to take another argument in detach_window to create a tab if
# there is no tab in that direction, instead of wrapping around. (The default
# behavior is also completely fine, though.)
map alt+shift+[      detach_window tab-left
map alt+shift+]      detach_window tab-right
map ctrl+alt+shift+[ detach_window new-tab-left
map ctrl+alt+shift+] detach_window new-tab-right

map alt+shift+,      move_tab_backward
map alt+shift+.      move_tab_forward

map alt+w            close_window_with_confirmation
map alt+shift+w      close_tab

map alt+up           scroll_line_up
map alt+down         scroll_line_down
map alt+page_up      scroll_to_prompt -1
map alt+page_down    scroll_to_prompt  1

# See https://sw.kovidgoyal.net/kitty/marks/#arbitrary-marker-functions
# for more powerful stuff
map f1               create_marker
map f2               remove_marker
map ctrl+p           scroll_to_mark prev
map ctrl+n           scroll_to_mark next

### Scrolling

action_alias kitty_scrollback_nvim
    \ kitten $XDG_DATA_HOME/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py

map ctrl+shift+h kitty_scrollback_nvim --config ksb_builtin_last_cmd_output

mouse_map ctrl+shift+right press ungrabbed
    \ combine
    \   : mouse_select_command_output
    \   : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

map --new-mode scroll alt+p

map --mode scroll k         scroll_line_up
map --mode scroll j         scroll_line_down
map --mode scroll u         scroll_page_up
map --mode scroll d         scroll_page_down
map --mode scroll alt+u     scroll_page_up
map --mode scroll alt+d     scroll_page_down
map --mode scroll g>g       scroll_home
map --mode scroll shift+g   scroll_end
map --mode scroll up        scroll_line_up
map --mode scroll down      scroll_line_down
map --mode scroll [         scroll_to_prompt -1
map --mode scroll ]         scroll_to_prompt  1
map --mode scroll alt+h     combine : kitten kittens/pass_keys.py left   alt+h : pop_keyboard_mode
map --mode scroll alt+j     combine : kitten kittens/pass_keys.py bottom alt+j : pop_keyboard_mode
map --mode scroll alt+k     combine : kitten kittens/pass_keys.py top    alt+k : pop_keyboard_mode
map --mode scroll alt+l     combine : kitten kittens/pass_keys.py right  alt+l : pop_keyboard_mode
map --mode scroll alt+p
    \ combine
    \   : kitty_scrollback_nvim --config ksb_builtin_get_text_all
    \   : pop_keyboard_mode

map --mode scroll i         pop_keyboard_mode
map --mode scroll q         pop_keyboard_mode
map --mode scroll esc       pop_keyboard_mode
